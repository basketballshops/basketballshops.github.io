google.maps.__gjsload__('drawing_impl', function(_){var i7=function(a,b){function c(f,g,h,k){var l=_.hq("div",a);_.wL(l,"left");l.style.lineHeight="0";g={title:g,Fg:h,ii:k,padding:[4],Jh:!0,Tj:!0};h=_.hq("span");h.style.display="inline-block";var m=f||"hand",q=Loa[m],r=_.UI(d,h,new _.O(0,q),h7);r.style.position="relative";var u=_.GM(l,h,f,g);_.M.addListener(u,"active_changed",function(){var v=u.get("active")?Moa[m]:q;_.VI(r,h7,new _.O(0,v))});u.bindTo("value",e,"drawingMode")}var d=_.wq("drawing"),e=this;c(null,"Arr\u00eater de dessiner",!0,!b.length);
_.B(b,function(f,g){var h=Noa[f];h&&c(f,h,!1,g==b.length-1)})},j7=function(){},k7=function(a,b,c){this.H=a;this.N=b;this.O=c},l7=function(a){if(!a.g){var b={};_.Ee(b,a.get("options"));null==b.zIndex&&(b.zIndex=a.O());delete b.map;a.g=a.H.i(b)}},m7=function(a,b,c){a.g&&(a.i&&a.j?(a.g.get("map")||a.g.bindTo("map",a),a.H.g(a.g,a.i,b,c.g<a.j.g)):a.H.g(a.g,b))},n7=function(a,b,c){m7(a,b,c);b=a.g.get("map");c=a.g;c.unbind("map");a.g=null;_.M.trigger(a,"overlaycomplete",{type:a.H.o(),overlay:c});_.M.trigger(a,
a.H.j(),c);_.P(b,"DMsim");a.i=null;a.j=null;a.o=!1},o7=function(){},p7=function(a){this.i=a;this.g=null},q7=function(a){if(!a.g){var b={};_.Ee(b,a.get("options"));delete b.map;a.g=new _.mh(b)}},r7=function(a,b,c,d){this.j=a;this.i=b;this.o=c;this.H=d+1E-6;this.g=null;this.V=new _.O(0,0);this.N=new _.O(0,0);this.O=new _.O(0,0)},s7=function(a,b){a.g.Zd.getPath().push(b);a.g.Ad.set("anchors",[b])},v7=function(a,b){var c=t7(a,b);c?(a.j||2!=c.type||s7(a,c.latLng),u7(a)):s7(a,b)},t7=function(a,b){var c=
a.g.Zd.getPath(),d=c.getLength();if(d){var e=a.get("map"),f=e.get("projection");e=e.__gm.get("zoom");e=a.H/(1<<e);var g=f.fromLatLngToPoint(b,a.V);b=b.lng();d=c.getAt(d-1);var h=new _.J(d.lat(),_.Ge(d.lng(),b-180,b+180),!0);h=f.fromLatLngToPoint(h,a.N);if(Math.abs(g.x-h.x)<=e&&Math.abs(g.y-h.y)<=e)return{type:1,latLng:d};c=c.getAt(0);b=new _.J(c.lat(),_.Ge(c.lng(),b-180,b+180),!0);a=f.fromLatLngToPoint(b,a.O);if(Math.abs(g.x-a.x)<=e&&Math.abs(g.y-a.y)<=e)return{type:2,latLng:c}}return null},x7=function(a){var b=
a.get("options"),c=new _.N;c.setValues(b);var d=new _.IK(c,a.j);c={};_.Ee(c,b);c.strokeColor=d.get("strokeColor");c.strokeOpacity=d.get("strokeOpacity");c.strokeWeight=d.get("strokeWeight");null==c.zIndex&&(c.zIndex=a.o());delete c.path;delete c.map;var e=new _.wj(c);e.bindTo("map",a);c.strokeOpacity=d.get("ghostStrokeOpacity");d=new _.JK;d.setValues(c);d.set("anchors",[]);d.bindTo("map",a);var f=null;a.j&&(f={},_.Ee(f,b),f.zIndex=c.zIndex,f.paths=new _.ai([e.getPath()]),delete f.map,f=new _.vj(f));
a.g={Zd:e,lk:f,Ad:d};w7(a)},u7=function(a){var b=a.get("map"),c=a.g.Zd;c.unbind("map");var d=a.g.lk;a.g.Ad.unbind("map");a.g.Ad.set("map",null);a.g=null;a.set("draggableCursor",a.i);c.getPath().getLength()?(a.j?(c.set("map",null),d.set("map",b),_.M.trigger(a,"overlaycomplete",{type:"polygon",overlay:d}),_.M.trigger(a,"polygoncomplete",d)):(_.M.trigger(a,"overlaycomplete",{type:"polyline",overlay:c}),_.M.trigger(a,"polylinecomplete",c)),_.P(b,"DMpol"),w7(a)):c.set("map",null)},w7=function(a){a.set("enablePanning",
!!a.g&&a.get("drawPolysWithDrag")&&!a.get("panWhileDrawing"))},y7=function(){},Ooa=function(){var a=0;return function(){return a++}},z7=function(){var a=this.i=Poa(this);this.ma=Qoa(this);var b="url("+_.vq+"crosshair.cur)";_.wp.g&&(b+=" 7 7");b+=", crosshair";var c=Ooa();this.H=6+(_.gv()?9:0);this.j={circle:new k7(new o7,b,c),marker:new p7(b),polygon:new r7(!0,b,c,this.H),polyline:new r7(!1,b,c,this.H),rectangle:new k7(new y7,b,c)};b=Roa(this);for(var d in this.j)c=this.j[d],c.bindTo("map",this),
c.bindTo("panWhileDrawing",this),c.bindTo("draggingCursor",a),c.bindTo("draggableCursor",b),c.bindTo("enablePanning",a,"panAtEdge"),c.bindTo("options",this,d+"Options"),_.M.forward(c,"overlaycomplete",this),_.M.forward(c,d+"complete",this);this.j.polygon.bindTo("drawPolysWithDrag",this);this.j.polyline.bindTo("drawPolysWithDrag",this);this.g=null;this.ua=[];this.o=this.N=null;this.W=0;this.ka=this.V=null;this.O=this.ha=void 0},Poa=function(a){var b="click dblclick movestart move moveend panbynow mousewheel mousemove".split(" "),
c=new _.BK(b),d=!1;_.B(b,function(e){_.M.addListener(c,e,function(f,g){var h=f instanceof _.Jq,k=h?f.Na:f;if("click"==e||"dblclick"==e||"mousemove"==e)h?("click"==e&&_.Oq(f),"dblclick"==e&&_.Oq(f),"mousemove"==e&&_.Mq(f)):_.Mf(f);if("mousewheel"!=e&&(!d||"mousemove"!=e)){if("mousemove"==e||"move"==e)a.V=e,a.ka=k,a.ha=g;if(d||!a.get("panWhileDrawing"))"movestart"==e&&(d=!0),"moveend"==e&&(d=!1),f=_.Un(),"panbynow"==e?a.V&&A7(a,a.V,a.ka,f,a.ha):A7(a,e,k,f,g)}})});return c},Qoa=function(a){var b=new _.$I(["map",
"drawingMode","pegmanDragging"],"active",function(c,d,e){return!!c&&!!d&&!e});b.bindTo("map",a);b.bindTo("drawingMode",a);a.i.bindTo("active",b);return b},Roa=function(a){var b=new _.$I(["draggableCursor","panWhileDrawing"],"cursor",function(c,d){return d?null:c});b.bindTo("panWhileDrawing",a);a.i.bindTo("draggableCursor",b,"cursor");return b},A7=function(a,b,c,d,e){var f=a.get("map");if(a.g){var g=f.__gm.get("projectionController"),h=f.__gm.get("panes");if(g&&h&&(g=e||c,a.O&&g)){e=a.O.Kc(g);f=_.jo(e,
f.getProjection());g=new _.O(g.clientX,g.clientY);(h=(h=a.get("snappingCallback"))&&h(a.g.Ph(f,e)))&&(f=h);h=!1;if("click"==b){if(300>=d-a.W&&a.o&&_.He(a.o.x,g.x,a.H)&&_.He(a.o.y,g.y,a.H))return;a.o=g;a.W=d;h=a.g.hg(f,e)}else"dblclick"==b?h=a.g.Oj():"mousemove"==b?h=a.g.Ah(f,e):"movestart"==b?h=a.g.Dh(f,e):"move"==b?h=a.g.Bh(f,e):"moveend"==b&&(h=a.g.Ch(f,e));h&&c&&_.Mf(c)}}},B7=function(a){var b=this;this.Ha=new _.Hi(function(){b.g&&(b.j.Wc(b.g),_.Xi(b.g),b.g=null,b.i.unbindAll(),b.i=null);b.j=b.get("layoutManager");
if(b.j&&0!=b.get("drawingControl")){var d=b.get("drawingControlOptions")||{},e=d.drawingModes||Soa,f=document.createElement("div");_.fA(f);f.style.margin=_.Q(5);_.mq(f,10);b.g=f;b.i=new i7(b.g,e);b.i.bindTo("drawingMode",b);b.j.addElement(b.g,d.position||1,!1,.25)}},0);var c=new z7;c.bindTo("map",a);c.bindTo("drawingMode",a);c.bindTo("panWhileDrawing",a);c.bindTo("markerOptions",a);c.bindTo("polygonOptions",a);c.bindTo("polylineOptions",a);c.bindTo("rectangleOptions",a);c.bindTo("circleOptions",a);
c.bindTo("drawPolysWithDrag",a);_.M.forward(c,"overlaycomplete",a);_.M.forward(c,"circlecomplete",a);_.M.forward(c,"markercomplete",a);_.M.forward(c,"polygoncomplete",a);_.M.forward(c,"polylinecomplete",a);_.M.forward(c,"rectanglecomplete",a);this.bindTo("map",a);this.bindTo("drawingControl",a);this.bindTo("drawingControlOptions",a);this.bindTo("drawingMode",a);this.set("snappingCallback",a.get("snappingCallback"));a.bindTo("snappingCallback",this);c.bindTo("snappingCallback",this);_.P(a.get("map"),
"DMnew")},C7=function(a){switch(a){case null:return null;case "Point":return"marker";case "LineString":return"polyline";case "Polygon":return"polygon";default:return null}};_.t(i7,_.N);var Noa={marker:"Ajouter un rep\u00e8re",polygon:"Dessiner une forme",polyline:"Tracer une ligne",rectangle:"Dessiner un rectangle",circle:"Dessiner un cercle"},h7=new _.Sg(16,16),Moa={hand:144,marker:112,polygon:96,polyline:128,rectangle:48,circle:0},Loa={hand:80,marker:176,polygon:64,polyline:32,rectangle:16,circle:160};_.A(j7,_.N);_.n=j7.prototype;_.n.hg=function(){return!1};_.n.Oj=function(){return!1};_.n.Ah=function(){return!1};_.n.Dh=function(){return!1};_.n.Bh=function(){return!1};_.n.Ch=function(){return!1};_.A(k7,j7);_.n=k7.prototype;_.n.Ph=function(a,b){l7(this);m7(this,a,b);return{latLng:a,overlay:this.g}};_.n.active_changed=function(){if(this.get("active"))this.set("draggableCursor",this.N),this.set("draggingCursor","");else{var a=this.g;a&&(a.unbind("map"),a.set("map",null),this.g=null);this.j=this.i=null;this.o=!1}};_.n.hg=function(a,b){this.i?n7(this,a,b):(l7(this),this.i=a,this.j=b,m7(this,a,b),this.o=!0);return!1};_.n.Ah=function(a,b){m7(this,a,b);return!1};
_.n.Dh=function(a,b){if(this.o)return!1;this.set("draggingCursor",this.N);this.set("enablePanning",!0);l7(this);this.i=a;this.j=b;m7(this,a,b);return!0};_.n.Bh=function(a,b){if(this.o)return!1;m7(this,a,b);return!0};_.n.Ch=function(a,b){if(this.o)return!1;this.set("draggingCursor","");this.set("enablePanning",!1);n7(this,a,b);return!0};o7.prototype.i=function(a){return new _.tj(a)};o7.prototype.g=function(a,b,c){a.set("center",b);var d=0,e=a.get("map");e&&c&&(d=e.__gm.get("baseMapType"),d=_.Xy(b,c,d&&d.radius));a.set("radius",d)};o7.prototype.o=function(){return"circle"};o7.prototype.j=function(){return"circlecomplete"};_.A(p7,j7);p7.prototype.Ph=function(a){q7(this);this.g.setPosition(a);return{latLng:a,overlay:this.g}};p7.prototype.active_changed=function(){this.get("active")&&this.set("draggableCursor",this.i)};p7.prototype.hg=function(a){var b=this.get("map");q7(this);this.g.setPosition(a);this.g.setMap(b);_.M.trigger(this,"overlaycomplete",{type:"marker",overlay:this.g});_.M.trigger(this,"markercomplete",this.g);_.P(b,"DMmar");this.g=null;return!1};_.A(r7,j7);_.n=r7.prototype;_.n.Ph=function(a){this.g&&this.g.Zd||x7(this);return{latLng:a,overlay:this.g.lk||this.g.Zd}};_.n.active_changed=function(){this.get("active")?this.set("draggableCursor",this.i):this.g&&this.g.Zd&&u7(this)};_.n.hg=function(a){if(!a)return!1;this.g?v7(this,a):(x7(this),s7(this,a));return!1};_.n.Oj=function(){this.g&&1<this.g.Zd.getPath().getLength()&&u7(this);return!1};
_.n.Ah=function(a){var b=a;this.g&&a&&(a=t7(this,a),this.set("draggableCursor",a?"pointer":this.i),a&&(b=a.latLng),this.g.Ad.set("freeVertexPosition",b));return!1};_.n.Dh=function(a){return a?this.get("drawPolysWithDrag")?(this.g||x7(this),this.g.Zd.getPath().getLength()||s7(this,a),this.set("draggingCursor",this.i),!0):!1:!1};_.n.Bh=function(a){return this.g&&this.get("drawPolysWithDrag")?(this.g.Ad.set("freeVertexPosition",a),!0):!1};
_.n.Ch=function(a){return a?this.get("drawPolysWithDrag")?(this.g&&(v7(this,a),this.set("draggingCursor","")),this.g&&this.g.Ad.set("freeVertexPosition",null),!0):!1:!1};_.n.drawPolysWithDrag_changed=r7.prototype.panWhileDrawing_changed=function(){w7(this)};y7.prototype.i=function(a){return new _.xj(a)};y7.prototype.g=function(a,b,c,d){c=c||b;d=void 0===d?!1:d;var e=c.lat(),f=b.lat();b.lat()<c.lat()&&(e=b.lat(),f=c.lat());var g=b.lng(),h=c.lng();d&&(g=c.lng(),h=b.lng());b=_.Bg(e,g,f,h);a.set("bounds",b)};y7.prototype.o=function(){return"rectangle"};y7.prototype.j=function(){return"rectanglecomplete"};_.A(z7,_.N);z7.prototype.map_changed=function(){var a=this,b=this.get("map"),c=this.ma,d=this.i;if(b){var e=b.__gm;e.i.then(function(f){a.O=f.mb});this.bindTo("mouseEventTarget",e);c.bindTo("pegmanDragging",e);d.bindTo("draggable",b);d.bindTo("scrollwheel",b);this.N=_.M.forward(d,"panbynow",e)}else this.unbind("mouseEventTarget"),this.set("mouseEventTarget",null),c.unbind("pegmanDragging"),d.unbind("draggable"),d.unbind("scrollwheel"),this.N&&(_.M.removeListener(this.N),this.N=null)};
z7.prototype.mouseEventTarget_changed=function(){var a=["panes","pixelBounds"],b=this.i;_.B(a,b.unbind,b);b=this.ua;_.B(b,_.M.removeListener);b.length=0;if(this.get("mouseEventTarget")){b=this.i;var c=this.get("map");_.Jz(b,a,c.__gm)}};z7.prototype.drawingMode_changed=function(){this.g&&this.g.set("active",!1);this.i.set("panAtEdge",!1);var a=this.get("drawingMode");(this.g=this.j[a])&&this.g.set("active",!0)};_.A(B7,_.N);B7.prototype.map_changed=function(){var a=this.get("map");a?(a=a.__gm,this.bindTo("layoutManager",a),a.set("snappingCallback",this.get("snappingCallback")),this.bindTo("snappingCallback",a)):(this.unbind("layoutManager"),this.set("layoutManager",null),this.unbind("snappingCallback"))};B7.prototype.layoutManager_changed=function(){_.Ii(this.Ha)};B7.prototype.drawingControl_changed=function(){_.Ii(this.Ha)};B7.prototype.drawingControlOptions_changed=function(){_.Ii(this.Ha)};
var Soa=["marker","polyline","rectangle","circle","polygon"];_.If("drawing_impl",{Uk:B7,yn:function(a){var b=new _.N,c=new _.$I(["dataDrawingMode"],"drawingManagerMode",C7);c.bindTo("dataDrawingMode",a,"drawingMode");var d=new _.$I(["styleOrStylingFunction"],"style",function(g){return"function"===typeof g?g(new _.Uf):g});d.bindTo("styleOrStylingFunction",a,"style");var e=new _.$I(["controls","controlPosition"],"drawingControlOptions",function(g,h){return{drawingModes:_.Ie(g,C7),position:h}});e.bindTo("controls",a);e.bindTo("controlPosition",a);var f=new _.$I(["controls"],
"drawingControl",function(g){return!!g});f.bindTo("controls",a);b.bindTo("map",a);b.bindTo("drawingMode",c,"drawingManagerMode");b.bindTo("markerOptions",d,"style");b.bindTo("polylineOptions",d,"style");b.bindTo("polygonOptions",d,"style");b.bindTo("drawingControlOptions",e);b.bindTo("drawingControl",f);_.M.addListener(b,"overlaycomplete",function(g){g=g.overlay;var h=_.yJ([g]),k=a.get("featureFactory");h=k?k(h):new _.Uf({geometry:h});a.add(h);g.set("map",null)});new B7(b);_.M.Wa(a,"map_changed",
function(){var g=a.get("map");g&&_.P(g,"Le")})}});});
